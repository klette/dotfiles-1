#!/bin/bash
# Usage: colordump
# Dump 256 ansi colors to the terminal.
# https://github.com/rtomayko/dotfiles/blob/rtomayko/bin/colordump

__palette_terminal() {
  local i row newrow
  i=0
  row=0
  while [ $i -lt 255 ];
  do
      newrow=$(expr $i / 10)
      test $newrow -ne $row && printf "\n"
      row=$newrow
      printf "\e[%dm %03d \e[0m" $i $i
      i=$(expr $i + 1)
  done
  echo
}

# get tmux color palette
# idea from http://superuser.com/questions/285381/how-does-the-tmux-color-palette-work
__palette_tmux() {
  for i in $(seq 0 4 255); do
    for j in $(seq $i $(expr $i + 3)); do
      for k in $(seq 1 $(expr 3 - ${#j})); do
        printf " "
      done
      printf "\x1b[38;5;${j}mcolour${j}"
      [[ $(expr $j % 4) != 3 ]] && printf "    "
    done
    printf "\n"
  done
}

case $1 in
  help|-h|--help) echo "Usage $0 [tmux|terminal]" ;;
  tmux) __palette_tmux ;;
  terminal) __palette_terminal ;;
  *) __palette_terminal ;;
esac
